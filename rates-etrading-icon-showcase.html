<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rates E-Trading — Icon System</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-deep: #06080c;
    --bg: #0b0e14;
    --surface: #111620;
    --surface-2: #171d2a;
    --surface-3: #1c2333;
    --border: #232d40;
    --border-bright: #2e3b52;
    --text: #d4dae6;
    --text-muted: #6b7a94;
    --text-dim: #3d4d66;
    --accent: #00d4aa;
    --accent-dim: rgba(0,212,170,0.12);
    --bid: #00d4aa;
    --ask: #ff6b8a;
    --warn: #ffb347;
    --info: #5b9cf6;
    --icon-color: #00d4aa;
    --icon-size: 28px;
    --icon-bg: transparent;
    --icon-radius: 8px;
    --icon-padding: 10px;
    --icon-opacity: 1;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg-deep);
    color: var(--text);
    font-family: 'Instrument Sans', sans-serif;
    min-height: 100vh;
    display: flex;
  }

  /* ── Sidebar Controls ── */
  .sidebar {
    width: 300px;
    min-width: 300px;
    background: var(--bg);
    border-right: 1px solid var(--border);
    height: 100vh;
    position: sticky;
    top: 0;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
  }

  .sidebar-header {
    padding: 1.5rem 1.4rem 1rem;
    border-bottom: 1px solid var(--border);
  }

  .sidebar-header h2 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--accent);
    margin-bottom: 0.2rem;
  }

  .sidebar-header .tagline {
    font-size: 0.72rem;
    color: var(--text-dim);
  }

  .controls {
    padding: 1rem 1.4rem;
    flex: 1;
    overflow-y: auto;
  }

  .control-group {
    margin-bottom: 1.4rem;
  }

  .control-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.62rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--text-muted);
    margin-bottom: 0.6rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .control-value {
    color: var(--accent);
    font-weight: 400;
    text-transform: none;
    letter-spacing: 0;
  }

  /* Color Swatches */
  .color-presets {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 6px;
    margin-bottom: 0.6rem;
  }

  .color-swatch {
    width: 100%;
    aspect-ratio: 1;
    border-radius: 6px;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.15s ease;
    position: relative;
  }

  .color-swatch:hover { transform: scale(1.12); }
  .color-swatch.active { border-color: #fff; box-shadow: 0 0 8px rgba(255,255,255,0.2); }

  .custom-color-row {
    display: flex;
    gap: 6px;
    align-items: center;
  }

  .custom-color-row input[type="color"] {
    width: 36px;
    height: 30px;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: var(--surface);
    cursor: pointer;
    padding: 2px;
  }

  .custom-color-row input[type="text"] {
    flex: 1;
    height: 30px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    padding: 0 0.6rem;
    outline: none;
    transition: border-color 0.15s;
  }

  .custom-color-row input[type="text"]:focus { border-color: var(--accent); }

  /* Sliders */
  input[type="range"] {
    -webkit-appearance: none;
    width: 100%;
    height: 4px;
    background: var(--surface-3);
    border-radius: 2px;
    outline: none;
    cursor: pointer;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--accent);
    border: 2px solid var(--bg);
    box-shadow: 0 0 6px rgba(0,212,170,0.3);
    cursor: pointer;
  }

  /* Select dropdown */
  select {
    width: 100%;
    height: 32px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text);
    font-family: 'Instrument Sans', sans-serif;
    font-size: 0.78rem;
    padding: 0 0.6rem;
    outline: none;
    cursor: pointer;
  }

  select:focus { border-color: var(--accent); }

  /* Toggle */
  .toggle-row {
    display: flex;
    gap: 6px;
  }

  .toggle-btn {
    flex: 1;
    height: 30px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.62rem;
    cursor: pointer;
    transition: all 0.15s;
    letter-spacing: 0.05em;
  }

  .toggle-btn:hover { border-color: var(--border-bright); color: var(--text); }
  .toggle-btn.active { background: var(--accent-dim); border-color: var(--accent); color: var(--accent); }

  /* BG Color Presets */
  .bg-presets {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 6px;
  }

  .bg-swatch {
    height: 26px;
    border-radius: 6px;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.15s;
  }

  .bg-swatch:hover { transform: scale(1.08); }
  .bg-swatch.active { border-color: var(--accent); }

  /* Export button */
  .export-section {
    padding: 1rem 1.4rem;
    border-top: 1px solid var(--border);
  }

  .export-btn {
    width: 100%;
    height: 36px;
    background: var(--accent-dim);
    border: 1px solid var(--accent);
    border-radius: 8px;
    color: var(--accent);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.08em;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }

  .export-btn:hover {
    background: var(--accent);
    color: var(--bg);
  }

  .export-btn .material-icons-sharp { font-size: 16px; }

  /* ── Main Content ── */
  .main {
    flex: 1;
    padding: 2rem 2.5rem;
    overflow-y: auto;
    height: 100vh;
  }

  .page-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 0.3rem;
    background: linear-gradient(135deg, #e8eef6, #8aa4c8);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .page-subtitle {
    font-size: 0.85rem;
    color: var(--text-dim);
    margin-bottom: 2rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
  }

  /* Search */
  .search-bar {
    position: relative;
    margin-bottom: 2rem;
  }

  .search-bar input {
    width: 100%;
    height: 42px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text);
    font-family: 'Instrument Sans', sans-serif;
    font-size: 0.88rem;
    padding: 0 1rem 0 2.8rem;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .search-bar input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(0,212,170,0.08);
  }

  .search-bar input::placeholder { color: var(--text-dim); }

  .search-bar .material-icons-sharp {
    position: absolute;
    left: 0.85rem;
    top: 50%;
    transform: translateY(-50%);
    font-size: 20px;
    color: var(--text-dim);
  }

  .search-count {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    color: var(--text-dim);
  }

  /* Category */
  .category {
    margin-bottom: 2.4rem;
    animation: fadeUp 0.4s ease both;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .category:nth-child(2) { animation-delay: 0.05s; }
  .category:nth-child(3) { animation-delay: 0.10s; }
  .category:nth-child(4) { animation-delay: 0.15s; }
  .category:nth-child(5) { animation-delay: 0.20s; }
  .category:nth-child(6) { animation-delay: 0.25s; }
  .category:nth-child(7) { animation-delay: 0.30s; }
  .category:nth-child(8) { animation-delay: 0.35s; }

  .category-header {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    margin-bottom: 1rem;
    padding-bottom: 0.6rem;
    border-bottom: 1px solid var(--border);
  }

  .category-header .cat-indicator {
    width: 3px;
    height: 18px;
    border-radius: 2px;
    background: var(--accent);
  }

  .category-header h3 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--text);
  }

  .category-header .cat-count {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    color: var(--text-dim);
    margin-left: auto;
  }

  .icon-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
    gap: 8px;
  }

  .icon-tile {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1rem 0.6rem 0.7rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
  }

  .icon-tile::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 50% 30%, rgba(0,212,170,0.04), transparent 70%);
    opacity: 0;
    transition: opacity 0.3s;
  }

  .icon-tile:hover {
    border-color: var(--border-bright);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  }

  .icon-tile:hover::before { opacity: 1; }

  .icon-tile.selected {
    border-color: var(--accent);
    background: var(--accent-dim);
  }

  .icon-tile .icon-wrap {
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--icon-radius);
    background: var(--icon-bg);
    padding: var(--icon-padding);
    transition: all 0.2s;
  }

  .icon-tile .material-icons-sharp {
    font-size: var(--icon-size);
    color: var(--icon-color);
    opacity: var(--icon-opacity);
    transition: all 0.2s;
  }

  .icon-tile .icon-name {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.55rem;
    color: var(--text-muted);
    text-align: center;
    line-height: 1.3;
    word-break: break-all;
  }

  .icon-tile .icon-label {
    font-size: 0.6rem;
    color: var(--text-dim);
    text-align: center;
    line-height: 1.2;
  }

  /* Copy toast */
  .toast {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: var(--accent);
    color: var(--bg);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    font-weight: 600;
    padding: 0.6rem 1.2rem;
    border-radius: 8px;
    opacity: 0;
    transition: all 0.3s ease;
    pointer-events: none;
    z-index: 100;
  }

  .toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }

  /* CSS Output Panel */
  .css-output {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1.2rem;
    margin-top: 1.5rem;
  }

  .css-output-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.8rem;
  }

  .css-output-header h4 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.62rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--text-muted);
  }

  .copy-css-btn {
    height: 26px;
    padding: 0 0.8rem;
    background: var(--surface-3);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 4px;
    transition: all 0.15s;
  }

  .copy-css-btn:hover { border-color: var(--accent); color: var(--accent); }
  .copy-css-btn .material-icons-sharp { font-size: 13px; }

  .css-code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    line-height: 1.7;
    color: var(--text-muted);
    white-space: pre-wrap;
  }

  .css-code .hl-prop { color: #7DD3FC; }
  .css-code .hl-val { color: #86EFAC; }
  .css-code .hl-sel { color: #F9A8D4; }
  .css-code .hl-cmt { color: #3d4d66; }

  /* Hidden when filtered */
  .category.hidden { display: none; }
  .icon-tile.hidden { display: none; }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--border-bright); }

  /* Responsive */
  @media (max-width: 900px) {
    body { flex-direction: column; }
    .sidebar { width: 100%; min-width: 100%; height: auto; position: static; border-right: none; border-bottom: 1px solid var(--border); }
    .main { height: auto; }
    .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 0 1.4rem; }
  }
</style>
</head>
<body>

<!-- ── SIDEBAR ── -->
<aside class="sidebar">
  <div class="sidebar-header">
    <h2>⚡ Icon Config</h2>
    <div class="tagline">Rates E-Trading • Front Office</div>
  </div>
  <div class="controls">

    <!-- Icon Color -->
    <div class="control-group">
      <div class="control-label">Icon Color <span class="control-value" id="colorVal">#00D4AA</span></div>
      <div class="color-presets" id="colorPresets">
        <div class="color-swatch active" data-color="#00d4aa" style="background:#00d4aa" title="Primary / Bid"></div>
        <div class="color-swatch" data-color="#ff6b8a" style="background:#ff6b8a" title="Ask / Sell"></div>
        <div class="color-swatch" data-color="#5b9cf6" style="background:#5b9cf6" title="Info / Link"></div>
        <div class="color-swatch" data-color="#ffb347" style="background:#ffb347" title="Warning"></div>
        <div class="color-swatch" data-color="#a78bfa" style="background:#a78bfa" title="Highlight"></div>
        <div class="color-swatch" data-color="#d4dae6" style="background:#d4dae6" title="Neutral"></div>
        <div class="color-swatch" data-color="#34d399" style="background:#34d399" title="Success"></div>
        <div class="color-swatch" data-color="#f472b6" style="background:#f472b6" title="Pink"></div>
        <div class="color-swatch" data-color="#fb923c" style="background:#fb923c" title="Orange"></div>
        <div class="color-swatch" data-color="#38bdf8" style="background:#38bdf8" title="Cyan"></div>
        <div class="color-swatch" data-color="#fbbf24" style="background:#fbbf24" title="Gold"></div>
        <div class="color-swatch" data-color="#6b7a94" style="background:#6b7a94" title="Muted"></div>
      </div>
      <div class="custom-color-row">
        <input type="color" id="customColor" value="#00d4aa">
        <input type="text" id="hexInput" value="#00d4aa" placeholder="#hex" maxlength="7">
      </div>
    </div>

    <!-- Icon Size -->
    <div class="control-group">
      <div class="control-label">Size <span class="control-value" id="sizeVal">28px</span></div>
      <input type="range" id="sizeSlider" min="16" max="56" value="28">
    </div>

    <!-- Opacity -->
    <div class="control-group">
      <div class="control-label">Opacity <span class="control-value" id="opacityVal">100%</span></div>
      <input type="range" id="opacitySlider" min="20" max="100" value="100">
    </div>

    <!-- Padding -->
    <div class="control-group">
      <div class="control-label">Padding <span class="control-value" id="paddingVal">10px</span></div>
      <input type="range" id="paddingSlider" min="0" max="24" value="10">
    </div>

    <!-- Border Radius -->
    <div class="control-group">
      <div class="control-label">Corner Radius <span class="control-value" id="radiusVal">8px</span></div>
      <input type="range" id="radiusSlider" min="0" max="28" value="8">
    </div>

    <!-- Background -->
    <div class="control-group">
      <div class="control-label">Icon Background</div>
      <div class="bg-presets" id="bgPresets">
        <div class="bg-swatch active" data-bg="transparent" style="background: repeating-conic-gradient(#232d40 0% 25%, #111620 0% 50%) 50% / 10px 10px" title="None"></div>
        <div class="bg-swatch" data-bg="rgba(0,212,170,0.1)" style="background:rgba(0,212,170,0.25)" title="Accent Subtle"></div>
        <div class="bg-swatch" data-bg="rgba(91,156,246,0.1)" style="background:rgba(91,156,246,0.25)" title="Info Subtle"></div>
        <div class="bg-swatch" data-bg="#1c2333" style="background:#1c2333" title="Surface"></div>
        <div class="bg-swatch" data-bg="rgba(255,255,255,0.06)" style="background:rgba(255,255,255,0.15)" title="Light Wash"></div>
      </div>
    </div>

    <!-- Style Variant -->
    <div class="control-group">
      <div class="control-label">Style Variant</div>
      <div class="toggle-row">
        <button class="toggle-btn active" data-style="default" onclick="setStyle('default',this)">Default</button>
        <button class="toggle-btn" data-style="outlined" onclick="setStyle('outlined',this)">Outlined</button>
        <button class="toggle-btn" data-style="filled" onclick="setStyle('filled',this)">Filled BG</button>
      </div>
    </div>

    <!-- Theme -->
    <div class="control-group">
      <div class="control-label">Theme Preset</div>
      <select id="themeSelect" onchange="applyTheme(this.value)">
        <option value="default">Bloomberg Dark</option>
        <option value="ice">ICE Terminal</option>
        <option value="tradeweb">Tradeweb Blue</option>
        <option value="refinitiv">Refinitiv</option>
        <option value="light">Light Mode</option>
      </select>
    </div>
  </div>

  <div class="export-section">
    <button class="export-btn" onclick="exportCSS()">
      <span class="material-icons-sharp">content_copy</span>
      Copy CSS Variables
    </button>
  </div>
</aside>

<!-- ── MAIN ── -->
<main class="main" id="main">
  <h1 class="page-title">Rates E-Trading Icon System</h1>
  <p class="page-subtitle">Material Icons Sharp — US Treasury & Rates Front Office</p>

  <div class="search-bar">
    <span class="material-icons-sharp">search</span>
    <input type="text" id="searchInput" placeholder="Search icons... (e.g. chart, trade, price)">
    <span class="search-count" id="searchCount"></span>
  </div>

  <div id="categories"></div>

  <!-- CSS Output -->
  <div class="css-output" id="cssOutput">
    <div class="css-output-header">
      <h4>Generated CSS</h4>
      <button class="copy-css-btn" onclick="exportCSS()">
        <span class="material-icons-sharp">content_copy</span> Copy
      </button>
    </div>
    <div class="css-code" id="cssCode"></div>
  </div>
</main>

<div class="toast" id="toast">Copied to clipboard!</div>

<script>
// ── Icon Data organized by Rates E-Trading categories ──
const iconCategories = [
  {
    name: "Market Data & Pricing",
    color: "#00d4aa",
    icons: [
      { id: "candlestick_chart", label: "Yield Curve" },
      { id: "show_chart", label: "Price Chart" },
      { id: "trending_up", label: "Rates Up" },
      { id: "trending_down", label: "Rates Down" },
      { id: "trending_flat", label: "Unchanged" },
      { id: "ssid_chart", label: "Spread Chart" },
      { id: "timeline", label: "Time Series" },
      { id: "bar_chart", label: "Volume Bars" },
      { id: "waterfall_chart", label: "Waterfall" },
      { id: "area_chart", label: "Area Chart" },
      { id: "stacked_line_chart", label: "Multi Curve" },
      { id: "analytics", label: "Analytics" },
      { id: "query_stats", label: "Market Stats" },
      { id: "data_thresholding", label: "Thresholds" },
    ]
  },
  {
    name: "Order Management & Execution",
    color: "#5b9cf6",
    icons: [
      { id: "swap_horiz", label: "Buy/Sell" },
      { id: "receipt_long", label: "Order Ticket" },
      { id: "assignment", label: "Order Blotter" },
      { id: "fact_check", label: "Confirm" },
      { id: "send", label: "Submit Order" },
      { id: "published_with_changes", label: "Amend" },
      { id: "cancel", label: "Cancel Order" },
      { id: "pending_actions", label: "Pending" },
      { id: "checklist", label: "Order Queue" },
      { id: "playlist_add_check", label: "Filled" },
      { id: "swap_vert", label: "Bid/Ask" },
      { id: "bolt", label: "Quick Trade" },
      { id: "timer", label: "TWP / Timer" },
      { id: "schedule_send", label: "Scheduled" },
    ]
  },
  {
    name: "Position & Portfolio",
    color: "#a78bfa",
    icons: [
      { id: "account_balance_wallet", label: "Positions" },
      { id: "pie_chart", label: "Allocation" },
      { id: "donut_large", label: "Exposure" },
      { id: "view_list", label: "Holdings" },
      { id: "inventory_2", label: "Inventory" },
      { id: "balance", label: "Net Position" },
      { id: "compare_arrows", label: "Long/Short" },
      { id: "account_tree", label: "Hierarchy" },
      { id: "hub", label: "Portfolio Hub" },
      { id: "category", label: "Asset Class" },
    ]
  },
  {
    name: "Risk & Compliance",
    color: "#ffb347",
    icons: [
      { id: "shield", label: "Risk Shield" },
      { id: "warning", label: "Risk Alert" },
      { id: "gpp_maybe", label: "Limit Breach" },
      { id: "health_and_safety", label: "Compliance" },
      { id: "policy", label: "Policy" },
      { id: "verified_user", label: "Approved" },
      { id: "report", label: "Exception" },
      { id: "thermostat", label: "Risk Gauge" },
      { id: "speed", label: "VaR Meter" },
      { id: "privacy_tip", label: "Restricted" },
      { id: "error", label: "Error" },
      { id: "block", label: "Blocked" },
    ]
  },
  {
    name: "Trade Lifecycle & Settlement",
    color: "#34d399",
    icons: [
      { id: "sync_alt", label: "Settlement" },
      { id: "published_with_changes", label: "Lifecycle" },
      { id: "approval", label: "Approval" },
      { id: "grading", label: "Mark-to-Mkt" },
      { id: "event_repeat", label: "Rollover" },
      { id: "currency_exchange", label: "FX Settle" },
      { id: "handshake", label: "Counterparty" },
      { id: "task_alt", label: "Matched" },
      { id: "rule", label: "STP Rule" },
      { id: "update", label: "Lifecycle Event" },
    ]
  },
  {
    name: "Connectivity & Streaming",
    color: "#38bdf8",
    icons: [
      { id: "cell_tower", label: "Feed Status" },
      { id: "sensors", label: "AMPS Stream" },
      { id: "wifi", label: "Connected" },
      { id: "wifi_off", label: "Disconnected" },
      { id: "cloud_sync", label: "Cloud Sync" },
      { id: "cable", label: "Data Link" },
      { id: "router", label: "Gateway" },
      { id: "lan", label: "Network" },
      { id: "rss_feed", label: "Live Feed" },
      { id: "stream", label: "Stream" },
      { id: "radio_button_checked", label: "Active" },
      { id: "radio_button_unchecked", label: "Inactive" },
    ]
  },
  {
    name: "Workspace & Layout",
    color: "#f472b6",
    icons: [
      { id: "dashboard", label: "Dashboard" },
      { id: "grid_view", label: "Grid Layout" },
      { id: "view_column", label: "Columns" },
      { id: "view_sidebar", label: "Sidebar" },
      { id: "view_compact", label: "Compact" },
      { id: "tab", label: "Tabs" },
      { id: "picture_in_picture", label: "Tearout" },
      { id: "open_in_new", label: "Pop Out" },
      { id: "fullscreen", label: "Fullscreen" },
      { id: "splitscreen", label: "Split View" },
      { id: "window", label: "Window" },
      { id: "dock_to_right", label: "Dock Right" },
    ]
  },
  {
    name: "Utilities & Actions",
    color: "#fb923c",
    icons: [
      { id: "search", label: "Search" },
      { id: "filter_list", label: "Filter" },
      { id: "sort", label: "Sort" },
      { id: "tune", label: "Settings" },
      { id: "download", label: "Export" },
      { id: "upload", label: "Import" },
      { id: "print", label: "Print" },
      { id: "refresh", label: "Refresh" },
      { id: "bookmark", label: "Bookmark" },
      { id: "notifications", label: "Alerts" },
      { id: "person", label: "Trader" },
      { id: "group", label: "Desk" },
      { id: "mail", label: "Messages" },
      { id: "chat", label: "Chat" },
      { id: "help", label: "Help" },
      { id: "info", label: "Info" },
    ]
  }
];

// ── State ──
let currentColor = "#00d4aa";
let currentStyle = "default";

// ── Render Categories ──
function renderCategories() {
  const container = document.getElementById('categories');
  container.innerHTML = iconCategories.map((cat, ci) => `
    <div class="category" data-cat="${ci}" style="animation-delay: ${ci * 0.05}s">
      <div class="category-header">
        <div class="cat-indicator" style="background: ${cat.color}"></div>
        <h3>${cat.name}</h3>
        <span class="cat-count">${cat.icons.length} icons</span>
      </div>
      <div class="icon-grid">
        ${cat.icons.map(icon => `
          <div class="icon-tile" data-icon="${icon.id}" data-label="${icon.label}" onclick="selectIcon(this, '${icon.id}')">
            <div class="icon-wrap">
              <span class="material-icons-sharp">${icon.id}</span>
            </div>
            <div class="icon-name">${icon.id}</div>
            <div class="icon-label">${icon.label}</div>
          </div>
        `).join('')}
      </div>
    </div>
  `).join('');
  updateSearchCount();
}

// ── Select Icon ──
function selectIcon(el, iconId) {
  document.querySelectorAll('.icon-tile.selected').forEach(e => e.classList.remove('selected'));
  el.classList.add('selected');
  updateCSSOutput(iconId);
  showToast(`${iconId} selected`);
}

// ── Color Controls ──
document.getElementById('colorPresets').addEventListener('click', e => {
  const swatch = e.target.closest('.color-swatch');
  if (!swatch) return;
  const color = swatch.dataset.color;
  setColor(color);
  document.querySelectorAll('#colorPresets .color-swatch').forEach(s => s.classList.remove('active'));
  swatch.classList.add('active');
});

document.getElementById('customColor').addEventListener('input', e => {
  setColor(e.target.value);
  document.querySelectorAll('#colorPresets .color-swatch').forEach(s => s.classList.remove('active'));
});

document.getElementById('hexInput').addEventListener('input', e => {
  let val = e.target.value;
  if (/^#[0-9a-fA-F]{6}$/.test(val)) {
    setColor(val);
    document.getElementById('customColor').value = val;
    document.querySelectorAll('#colorPresets .color-swatch').forEach(s => s.classList.remove('active'));
  }
});

function setColor(color) {
  currentColor = color;
  document.documentElement.style.setProperty('--icon-color', color);
  document.getElementById('colorVal').textContent = color.toUpperCase();
  document.getElementById('hexInput').value = color;
  document.getElementById('customColor').value = color;
  updateCSSOutput();
}

// ── Sliders ──
document.getElementById('sizeSlider').addEventListener('input', e => {
  const v = e.target.value;
  document.documentElement.style.setProperty('--icon-size', v + 'px');
  document.getElementById('sizeVal').textContent = v + 'px';
  updateCSSOutput();
});

document.getElementById('opacitySlider').addEventListener('input', e => {
  const v = e.target.value;
  document.documentElement.style.setProperty('--icon-opacity', v / 100);
  document.getElementById('opacityVal').textContent = v + '%';
  updateCSSOutput();
});

document.getElementById('paddingSlider').addEventListener('input', e => {
  const v = e.target.value;
  document.documentElement.style.setProperty('--icon-padding', v + 'px');
  document.getElementById('paddingVal').textContent = v + 'px';
  updateCSSOutput();
});

document.getElementById('radiusSlider').addEventListener('input', e => {
  const v = e.target.value;
  document.documentElement.style.setProperty('--icon-radius', v + 'px');
  document.getElementById('radiusVal').textContent = v + 'px';
  updateCSSOutput();
});

// ── BG Presets ──
document.getElementById('bgPresets').addEventListener('click', e => {
  const swatch = e.target.closest('.bg-swatch');
  if (!swatch) return;
  document.documentElement.style.setProperty('--icon-bg', swatch.dataset.bg);
  document.querySelectorAll('#bgPresets .bg-swatch').forEach(s => s.classList.remove('active'));
  swatch.classList.add('active');
  updateCSSOutput();
});

// ── Style Variant ──
function setStyle(style, btn) {
  currentStyle = style;
  document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');

  document.querySelectorAll('.icon-wrap').forEach(wrap => {
    wrap.style.border = 'none';
    wrap.style.boxShadow = 'none';
  });

  if (style === 'outlined') {
    document.querySelectorAll('.icon-wrap').forEach(wrap => {
      wrap.style.border = `1.5px solid var(--icon-color)`;
    });
  } else if (style === 'filled') {
    document.querySelectorAll('.icon-wrap').forEach(wrap => {
      wrap.style.background = `var(--icon-color)`;
    });
    document.querySelectorAll('.icon-tile .material-icons-sharp').forEach(icon => {
      icon.style.color = 'var(--bg)';
    });
    updateCSSOutput();
    return;
  }

  document.querySelectorAll('.icon-tile .material-icons-sharp').forEach(icon => {
    icon.style.color = '';
  });
  document.querySelectorAll('.icon-wrap').forEach(wrap => {
    if (style !== 'filled') wrap.style.background = '';
  });
  updateCSSOutput();
}

// ── Themes ──
function applyTheme(theme) {
  const themes = {
    default: { bg: '#06080c', bgMain: '#0b0e14', surface: '#111620', border: '#232d40', text: '#d4dae6', accent: '#00d4aa' },
    ice:     { bg: '#070a10', bgMain: '#0a0e18', surface: '#0f1524', border: '#1e2a42', text: '#c0d0e8', accent: '#4dd0e1' },
    tradeweb:{ bg: '#05080e', bgMain: '#081020', surface: '#0c1628', border: '#1a2844', text: '#b8c8e0', accent: '#2196f3' },
    refinitiv:{ bg: '#0c0a08', bgMain: '#12100e', surface: '#1a1714', border: '#2e2820', text: '#d8d0c4', accent: '#ff9800' },
    light:   { bg: '#eef1f5', bgMain: '#f5f7fa', surface: '#ffffff', border: '#d8dde5', text: '#2c3e50', accent: '#0066cc' },
  };

  const t = themes[theme];
  if (!t) return;

  document.documentElement.style.setProperty('--bg-deep', t.bg);
  document.documentElement.style.setProperty('--bg', t.bgMain);
  document.documentElement.style.setProperty('--surface', t.surface);
  document.documentElement.style.setProperty('--border', t.border);
  document.documentElement.style.setProperty('--text', t.text);
  document.documentElement.style.setProperty('--accent', t.accent);
  setColor(t.accent);

  // Sync swatch
  const match = document.querySelector(`#colorPresets .color-swatch[data-color="${t.accent}"]`);
  document.querySelectorAll('#colorPresets .color-swatch').forEach(s => s.classList.remove('active'));
  if (match) match.classList.add('active');
}

// ── Search ──
document.getElementById('searchInput').addEventListener('input', e => {
  const q = e.target.value.toLowerCase().trim();
  let totalVisible = 0;

  document.querySelectorAll('.category').forEach(cat => {
    let catVisible = 0;
    cat.querySelectorAll('.icon-tile').forEach(tile => {
      const match = tile.dataset.icon.includes(q) || tile.dataset.label.toLowerCase().includes(q);
      tile.classList.toggle('hidden', !match);
      if (match) catVisible++;
    });
    cat.classList.toggle('hidden', catVisible === 0);
    totalVisible += catVisible;
    cat.querySelector('.cat-count').textContent = catVisible + ' icons';
  });
  updateSearchCount(totalVisible, q);
});

function updateSearchCount(count, q) {
  const total = document.querySelectorAll('.icon-tile').length;
  const el = document.getElementById('searchCount');
  if (q) {
    el.textContent = `${count} / ${total}`;
  } else {
    el.textContent = `${total} icons`;
  }
}

// ── CSS Output ──
function updateCSSOutput(selectedIcon) {
  const size = document.getElementById('sizeSlider').value;
  const opacity = document.getElementById('opacitySlider').value;
  const padding = document.getElementById('paddingSlider').value;
  const radius = document.getElementById('radiusSlider').value;
  const bgVal = getComputedStyle(document.documentElement).getPropertyValue('--icon-bg').trim();

  const sel = selectedIcon || document.querySelector('.icon-tile.selected')?.dataset.icon || 'icon_name';

  let css = `<span class="hl-cmt">/* Rates E-Trading Icon Style */</span>\n`;
  css += `<span class="hl-sel">.mat-icon</span>,\n<span class="hl-sel">.material-icons-sharp</span> {\n`;
  css += `  <span class="hl-prop">color</span>: <span class="hl-val">${currentColor}</span>;\n`;
  css += `  <span class="hl-prop">font-size</span>: <span class="hl-val">${size}px</span>;\n`;
  if (opacity < 100) css += `  <span class="hl-prop">opacity</span>: <span class="hl-val">${(opacity/100).toFixed(2)}</span>;\n`;
  css += `}\n\n`;

  if (bgVal !== 'transparent' || padding > 0 || currentStyle !== 'default') {
    css += `<span class="hl-sel">.icon-container</span> {\n`;
    css += `  <span class="hl-prop">padding</span>: <span class="hl-val">${padding}px</span>;\n`;
    css += `  <span class="hl-prop">border-radius</span>: <span class="hl-val">${radius}px</span>;\n`;
    if (bgVal !== 'transparent') css += `  <span class="hl-prop">background</span>: <span class="hl-val">${bgVal}</span>;\n`;
    if (currentStyle === 'outlined') css += `  <span class="hl-prop">border</span>: <span class="hl-val">1.5px solid ${currentColor}</span>;\n`;
    if (currentStyle === 'filled') {
      css += `  <span class="hl-prop">background</span>: <span class="hl-val">${currentColor}</span>;\n`;
      css += `  <span class="hl-prop">color</span>: <span class="hl-val">#0b0e14</span>;\n`;
    }
    css += `}\n\n`;
  }

  css += `<span class="hl-cmt">/* Usage */</span>\n`;
  css += `<span class="hl-sel">&lt;span class="material-icons-sharp"&gt;</span>${sel}<span class="hl-sel">&lt;/span&gt;</span>`;

  document.getElementById('cssCode').innerHTML = css;
}

// ── Export ──
function exportCSS() {
  const el = document.getElementById('cssCode');
  const text = el.textContent || el.innerText;
  navigator.clipboard.writeText(text).then(() => showToast('CSS copied to clipboard!'));
}

// ── Toast ──
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  clearTimeout(t._timer);
  t._timer = setTimeout(() => t.classList.remove('show'), 1800);
}

// ── Init ──
renderCategories();
updateCSSOutput();
</script>
</body>
</html>
